# ุฅุตูุงุญ ูุดููุฉ: ุชุนุฏูู ุงููุดุฑูุน ูุง ููุฑุณู ููุง ูุชู ุงูุญูุธ

## ๐ ููุฎุต ุงููุดููุฉ

ุจุนุฏ ุฅุฌุฑุงุก ุชุนุฏูู ูู ูุงุฌูุฉ ุงูุชุญุฑูุฑุ ุงูุชุนุฏูู ูุง ููุฑุณู ุฅูู ุงูุฎุงุฏู ููุง ูุชู ุงูุญูุธ.

## ๐ ูุงุฆูุฉ ุงูุชุดุฎูุต (Possible Causes)

### 1. **ูุดููุฉ ูู ูุฒุงููุฉ ุงูุจูุงูุงุช (ุงูุณุจุจ ุงูุฑุฆูุณู)**
   - `existingFiles` ู `existingImages` ูุงูุช ูุชุบูุฑุงุช state ูููุตูุฉ ุบูุฑ ูุชุฒุงููุฉ ูุน form data
   - ุนูุฏ ุงุณุชุฏุนุงุก `setData()` ุซู `put()` ูุจุงุดุฑุฉุ ูุฏ ูุง ุชููู ุงูุจูุงูุงุช ูุญุฏุซุฉ ุจุณุจุจ ุงูุทุจูุนุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู React state

### 2. **ูุดุงูู ูุญุชููุฉ ุฃุฎุฑู:**
   - ุนุฏู ูุฌูุฏ route ููู endpoint
   - ูุดุงูู ูู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช (authorization)
   - ุฃุฎุทุงุก ูู ุงูุชุญูู ูู ุงูุจูุงูุงุช (validation)
   - ูุดุงูู ูู ูุนุงูุฌุฉ FormData

## โ ุงูุญู ุงููุทุจู

### ุงูุชุบููุฑุงุช ูู `resources/js/Pages/School/Projects/Edit.jsx`:

1. **ูุฒุงููุฉ `existingFiles` ู `existingImages` ูุน form data:**
   ```javascript
   const removeExistingFile = (index) => {
       setExistingFiles(prev => {
           const newFiles = prev.filter((_, i) => i !== index);
           setData('existing_files', newFiles); // ุชุญุฏูุซ form data
           return newFiles;
       });
   };
   ```

2. **ุชุญุณูู `handleSubmit` ูุถูุงู ุฅุฑุณุงู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ:**
   ```javascript
   const handleSubmit = (e) => {
       e.preventDefault();
       
       // ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
       if (!data.title || !data.description || !data.category) {
           alert('ูุฑุฌู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ');
           return;
       }
       
       // ุชุญุฏูุซ existing_files ู existing_images ูุจู ุงูุฅุฑุณุงู
       setData('existing_files', existingFiles || []);
       setData('existing_images', existingImages || []);
       
       // ุงุณุชุฎุฏุงู transform ูุถูุงู ุฏูุฌ ุงูุจูุงูุงุช
       transform((data) => ({
           ...data,
           existing_files: existingFiles || [],
           existing_images: existingImages || [],
       }));
       
       // ุฅุฑุณุงู ุงูุจูุงูุงุช
       put(`/school/projects/${project.id}`, {
           forceFormData: true,
           preserveScroll: false,
           onSuccess: () => {
               showSuccess('ุชู ุชุญุฏูุซ ุงููุดุฑูุน ุจูุฌุงุญ');
               router.visit('/school/projects');
           },
           onError: (errors) => {
               // ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุญุณูุฉ
           },
       });
   };
   ```

3. **ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:**
   - ุฅุถุงูุฉ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
   - ุชุณุฌูู ุงูุฃุฎุทุงุก ูู console ููุชุดุฎูุต

## ๐งช ุญุงูุงุช ุงูุงุฎุชุจุงุฑ ุจุนุฏ ุงูุฅุตูุงุญ

### 1. ุงุฎุชุจุงุฑ ุงูุชุนุฏูู ุงูุฃุณุงุณู:
   - [ ] ูุชุญ ุตูุญุฉ ุงูุชุญุฑูุฑ
   - [ ] ุชุนุฏูู ุงูุนููุงู
   - [ ] ุชุนุฏูู ุงููุตู
   - [ ] ุชุบููุฑ ุงููุฆุฉ
   - [ ] ุงูุถุบุท ุนูู "ุญูุธ ุงูุชุบููุฑุงุช"
   - [ ] ุงูุชุญูู ูู ุธููุฑ ุฑุณุงูุฉ ุงููุฌุงุญ
   - [ ] ุงูุชุญูู ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### 2. ุงุฎุชุจุงุฑ ุงููููุงุช ูุงูุตูุฑ:
   - [ ] ุฅุถุงูุฉ ูููุงุช ุฌุฏูุฏุฉ
   - [ ] ุฅุถุงูุฉ ุตูุฑ ุฌุฏูุฏุฉ
   - [ ] ุญุฐู ูููุงุช ููุฌูุฏุฉ
   - [ ] ุญุฐู ุตูุฑ ููุฌูุฏุฉ
   - [ ] ุญูุธ ุงูุชุนุฏููุงุช
   - [ ] ุงูุชุญูู ูู ุชุญุฏูุซ ุงููููุงุช ูุงูุตูุฑ

### 3. ุงุฎุชุจุงุฑ ุงูุชุญูู ูู ุงูุจูุงูุงุช:
   - [ ] ูุญุงููุฉ ุงูุญูุธ ุจุฏูู ุนููุงู
   - [ ] ูุญุงููุฉ ุงูุญูุธ ุจุฏูู ูุตู
   - [ ] ุงูุชุญูู ูู ุธููุฑ ุฑุณุงุฆู ุงูุฎุทุฃ ุงูููุงุณุจุฉ

### 4. ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก:
   - [ ] ูุญุงููุฉ ุงูุญูุธ ูุน ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ
   - [ ] ุงูุชุญูู ูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุงูุฎุงุฏู
   - [ ] ุงูุชุญูู ูู ุธููุฑ ุฑุณุงุฆู ุงูุฎุทุฃ ูููุณุชุฎุฏู

## ๐ง ุฎุทูุงุช ุงูุชุดุฎูุต ุงูุณุฑูุนุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุงุชุจุน ูุฐู ุงูุฎุทูุงุช:

1. **ุงูุชุญ Developer Tools (F12)**
   - ุงูุชูู ุฅูู ุชุจููุจ **Console**
   - ุงุจุญุซ ุนู ุฃู ุฃุฎุทุงุก JavaScript

2. **ุชุญูู ูู Network Tab:**
   - ุงูุชุญ ุชุจููุจ **Network**
   - ุญุงูู ุญูุธ ุงูุชุนุฏููุงุช
   - ุงุจุญุซ ุนู ุทูุจ `PUT /school/projects/{id}`
   - ุชุญูู ูู:
     - ูู ุงูุทูุจ ุชู ุฅุฑุณุงููุ
     - ูุง ูู ุญุงูุฉ ุงูุงุณุชุฌุงุจุฉ (Status Code)?
     - ูุง ูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ (Payload)?

3. **ุชุญูู ูู Server Logs:**
   - ุฑุงุฌุน ูููุงุช log ูู Laravel
   - ุงุจุญุซ ุนู ุฃุฎุทุงุก ูู `storage/logs/laravel.log`

4. **ุชุญูู ูู Routes:**
   ```bash
   php artisan route:list | grep school.projects
   ```

5. **ุชุญูู ูู ุงูุตูุงุญูุงุช:**
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ ุชุนุฏูู ุงููุดุฑูุน
   - ุฑุงุฌุน `SchoolProjectController::update()` ููุชุญูู ูู ููุทู ุงูุตูุงุญูุงุช

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

- ุชู ุงุณุชุฎุฏุงู `transform` ูุถูุงู ุฏูุฌ `existingFiles` ู `existingImages` ูุน ุงูุจูุงูุงุช ูุจู ุงูุฅุฑุณุงู
- ุชู ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุนุฑุถ ุฑุณุงุฆู ูุงุถุญุฉ ูููุณุชุฎุฏู
- ุชู ูุฒุงููุฉ state variables ูุน form data ุนูุฏ ุญุฐู ุงููููุงุช/ุงูุตูุฑ

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ูุฐุง ุงูุฅุตูุงุญ:

1. ุชุญูู ูู ุฅุตุฏุงุฑ Inertia.js ุงููุณุชุฎุฏู
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช Laravel (CSRF, CORS, etc.)
3. ุฑุงุฌุน ููุทู ุงูุชุญูู ูู `SchoolProjectController::update()`
4. ุชุญูู ูู ูุฌูุฏ ุฃู middleware ูุฏ ูููุน ุงูุทูุจ

